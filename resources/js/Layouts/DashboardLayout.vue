<script setup>
import '@fortawesome/fontawesome-free/css/all.min.css';
import { ref, onMounted, computed } from 'vue';
import NavHeader from '@/Components/NavHeader.vue'; 
import Sidebar from '@/Components/Sidebar.vue';
import PaymentCards from '@/Components/PaymentCards.vue'; 
import TransactionList from '@/Components/TransactionList.vue'; 

const menuItems = [
    { name: "Dashboard", icon: "fa-solid fa-table-cells-large", route: "/DashboardPage" },
    { name: "Counter Payment", icon: "fa-solid fa-boxes-packing", route: "/CounterPaymentPage" },
    { name: "Transaction Log", icon: "fa-solid fa-file-export", route: "/TransactionLogPage" },
];

const isSidebarOpen = ref(true); 
const isMobile = computed(() => window.innerWidth < 1024);

onMounted(() => {
    // Set initial state based on device size
    if (isMobile.value) {
        isSidebarOpen.value = false;
    } else {
        isSidebarOpen.value = true;
    }
});

const toggleSidebar = () => {
    isSidebarOpen.value = !isSidebarOpen.value;
};

// HANDLERS FOR MOUSE EVENTS
const openSidebarOnEnter = () => {
    // Only expand if we are not on a mobile screen
    if (!isMobile.value) {
        isSidebarOpen.value = true;
    }
};

const closeSidebarOnLeave = () => {
    // Collapse to icon view when mouse leaves, but only on desktop
    if (!isMobile.value) {
        isSidebarOpen.value = false;
    }
};
</script>

<template>
<div class="min-h-screen bg-gray-100 flex flex-col">
    <NavHeader @toggleSidebar="toggleSidebar" />
    
    <div class="flex-1 flex">
        
        <Sidebar 
            :menu-items="menuItems" 
            :is-sidebar-open="isSidebarOpen"
            @mouseenter="openSidebarOnEnter"
            @mouseleave="closeSidebarOnLeave"
        />

        <main 
            class="flex-1 transition-all duration-300 p-5 min-w-0" 
            :class="{ 
                'ml-[12.5rem]': isSidebarOpen, 
                'ml-[4.5rem]': !isSidebarOpen 
            }"
            >
            <PaymentCards />
            
            <TransactionList />
        </main>
    </div>
</div>
</template>

<!-- 
<script setup>
import { computed } from 'vue';

const props = defineProps({
  iconName: {
    type: String,
    required: true
  },
  // Optional class for the SVG container (e.g., 'w-6 h-6 text-gray-700')
  containerClass: {
    type: String,
    default: ''
  }
});

// Define all SVGs as a map for easy lookup
const svgMap = {
  // 1. Dashboard: Removed width/height, used currentColor
  'Dashboard': `
    <svg viewBox="0 0 30 31" fill="none" xmlns="http://www.w3.org/2000/svg">
      <mask id="mask0_818_222" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="30" height="31">
        <rect y="0.947266" width="30" height="30" fill="currentColor"/>
      </mask>
      <g mask="url(#mask0_818_222)">
        <path d="M16.25 12.0852V4.62476H26.25V12.0852H16.25ZM3.75 17.0588V4.62476H13.75V17.0588H3.75ZM16.25 27.0061V14.572H26.25V27.0061H16.25ZM3.75 27.0061V19.5456H13.75V27.0061H3.75ZM6.25 14.572H11.25V7.11157H6.25V14.572ZM18.75 24.5193H23.75V17.0588H18.75V24.5193ZM18.75 9.59838H23.75V7.11157H18.75V9.59838ZM6.25 24.5193H11.25V22.0325H6.25V24.5193Z" fill="currentColor"/>
      </g>
    </svg>
  `.trim(),

  // 2. Counter Payment: Removed width/height, used currentColor
  'Counter Payment': `
    <svg viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M16.043 0.620174C17.2807 0.618863 18.491 0.990264 19.5205 1.68731C20.55 2.38436 21.3522 3.37569 21.8257 4.53567C21.8669 4.64086 21.8854 4.75378 21.8799 4.86683C21.8745 4.97988 21.8452 5.09044 21.7942 5.19106C21.7431 5.29169 21.6713 5.38005 21.5838 5.4502C21.4962 5.52036 21.3948 5.57067 21.2865 5.59777C21.1052 5.64237 20.9142 5.61974 20.748 5.53398C20.5817 5.44822 20.4512 5.30497 20.38 5.13013C20.0231 4.26237 19.4206 3.52138 18.6487 3.00081C17.8767 2.48023 16.97 2.20344 16.043 2.2054H15.7616C14.5181 2.19909 13.3231 2.69408 12.4394 3.58148C11.5557 4.46888 11.0557 5.676 11.0495 6.93728C11.0433 8.19856 11.5313 9.41069 12.4062 10.307C13.2811 11.2033 14.4712 11.7104 15.7148 11.7167H16.043C16.9384 11.7175 17.8154 11.4581 18.5701 10.9693C19.3248 10.4805 19.9258 9.7827 20.3019 8.95844C20.3805 8.78582 20.5177 8.64763 20.6884 8.56906C20.8591 8.49048 21.0519 8.47677 21.2318 8.53043C21.3386 8.56165 21.4376 8.61564 21.5223 8.68878C21.6069 8.76192 21.6751 8.85253 21.7225 8.95455C21.7698 9.05658 21.7951 9.16768 21.7968 9.28043C21.7984 9.39318 21.7763 9.50499 21.7319 9.60838C21.2273 10.7084 20.4243 11.64 19.4169 12.2941C18.4094 12.9482 17.2391 13.2978 16.043 13.3019C15.8842 13.3121 15.725 13.3121 15.5663 13.3019C14.0079 13.1627 12.5577 12.4359 11.5019 11.265C10.446 10.0941 9.8614 8.56431 9.86336 6.97757C9.86532 5.39083 10.4537 3.86249 11.5125 2.69432C12.5712 1.52614 14.0232 0.80302 15.5819 0.66773C15.7343 0.641185 15.8884 0.625296 16.043 0.620174Z" fill="currentColor"/>
      <path d="M13.8707 5.62941C13.8562 5.08965 14.0464 4.5648 14.4021 4.16308C14.6706 3.87732 15.0253 3.69046 15.4102 3.63203V3.10098C15.4102 2.90968 15.4851 2.72622 15.6184 2.59096C15.7518 2.45569 15.9327 2.3797 16.1213 2.3797C16.3099 2.3797 16.4908 2.45569 16.6241 2.59096C16.7575 2.72622 16.8324 2.90968 16.8324 3.10098V3.67958C17.1755 3.79415 17.4806 4.00296 17.7137 4.2828C17.9468 4.56264 18.0989 4.90257 18.153 5.2648C18.1725 5.34218 18.1755 5.42286 18.1618 5.5015C18.1482 5.58014 18.1182 5.65493 18.0738 5.72091C18.0295 5.78688 17.9718 5.84252 17.9046 5.88415C17.8374 5.92577 17.7623 5.95241 17.6842 5.9623C17.5589 5.97975 17.4316 5.95201 17.3245 5.88391C17.2174 5.81582 17.1372 5.71171 17.0981 5.58978C17.0442 5.40662 16.9538 5.23666 16.8324 5.09043C16.7349 4.97827 16.6145 4.88898 16.4795 4.82875C16.3446 4.76853 16.1983 4.73882 16.0509 4.74168C15.839 4.73429 15.6288 4.78348 15.4414 4.88435C15.3824 4.91744 15.3273 4.95733 15.2773 5.00324C15.1977 5.06979 15.1318 5.15168 15.0835 5.24419C15.0352 5.3367 15.0055 5.43799 14.996 5.54222C14.9724 5.7146 15.0053 5.89007 15.0898 6.04156C15.1632 6.15478 15.2659 6.24528 15.3867 6.30313H15.4414C15.5977 6.37446 15.9103 6.4775 16.3713 6.62017L16.8246 6.79454C17.0107 6.86593 17.1867 6.96187 17.3482 7.07988C17.5695 7.25414 17.7464 7.47975 17.8639 7.73775C17.9865 8.00606 18.0505 8.29806 18.0515 8.59377C18.0582 8.9374 17.9746 9.27665 17.8092 9.57661C17.6545 9.86144 17.4171 10.0911 17.1293 10.2345C17.032 10.2865 16.9299 10.3289 16.8246 10.3613V10.7893C16.8246 10.9806 16.7497 11.1641 16.6163 11.2993C16.4829 11.4346 16.3021 11.5106 16.1135 11.5106C15.9249 11.5106 15.744 11.4346 15.6106 11.2993C15.4773 11.1641 15.4023 10.9806 15.4023 10.7893V10.3851C15.0949 10.3134 14.8118 10.1602 14.5818 9.94121C14.3599 9.72316 14.1982 9.44986 14.113 9.1486C14.0934 9.06883 14.0912 8.98567 14.1067 8.90497C14.1222 8.82428 14.1549 8.74801 14.2026 8.68152C14.2503 8.61503 14.3117 8.55995 14.3827 8.52014C14.4536 8.48033 14.5322 8.45677 14.6131 8.4511C14.7313 8.44123 14.8494 8.47176 14.9485 8.53783C15.0476 8.60391 15.1221 8.70172 15.1601 8.8157C15.1993 8.94676 15.269 9.06636 15.3633 9.16445C15.556 9.3186 15.7982 9.39485 16.0431 9.37846C16.2834 9.39523 16.5223 9.33115 16.723 9.19615L16.7777 9.1486C16.8376 9.09701 16.8856 9.03257 16.918 8.95993C16.9504 8.88728 16.9666 8.80825 16.9652 8.72851C16.9646 8.64793 16.9477 8.56834 16.9154 8.4947C16.8831 8.42106 16.8363 8.35495 16.7777 8.3005C16.473 8.10748 16.137 7.97063 15.7853 7.89627L15.3867 7.76945C15.1097 7.68115 14.8465 7.55303 14.6053 7.389C14.3607 7.21382 14.1666 6.97583 14.0426 6.69943C13.9062 6.36056 13.8474 5.99468 13.8707 5.62941ZM10.276 12.5093C10.4671 12.5099 10.6579 12.5258 10.8465 12.5568C11.3104 12.6305 11.733 12.8699 12.0382 13.2318C12.3434 13.5936 12.5111 14.0542 12.511 14.5304C12.511 14.8416 12.4387 15.1485 12.3 15.4261C12.2631 15.494 12.2437 15.5704 12.2437 15.648C12.2437 15.7256 12.2631 15.802 12.3 15.8699C12.3403 15.936 12.3967 15.9904 12.4638 16.0279C12.5309 16.0654 12.6063 16.0847 12.6829 16.0839H12.7923L21.3882 13.2464C21.5892 13.1639 21.8045 13.1235 22.0212 13.1275C22.4273 13.1264 22.8234 13.2553 23.1531 13.4958C23.4828 13.7363 23.7294 14.0762 23.8576 14.467C24.0083 14.8424 24.0403 15.256 23.9493 15.6507C23.8583 16.0454 23.6488 16.4017 23.3497 16.6705L21.5133 18.2715C21.4348 18.3387 21.344 18.3896 21.2462 18.4212C21.1483 18.4528 21.0452 18.4645 20.9429 18.4557C20.8406 18.4468 20.741 18.4176 20.6498 18.3697C20.5586 18.3218 20.4776 18.2561 20.4114 18.1764C20.3452 18.0968 20.295 18.0048 20.2639 17.9055C20.2328 17.8062 20.2212 17.7017 20.2299 17.5979C20.2386 17.4941 20.2674 17.3931 20.3147 17.3006C20.3619 17.2081 20.4266 17.126 20.5052 17.0589L22.3729 15.4736C22.4217 15.4104 22.452 15.3345 22.4603 15.2546C22.4686 15.1747 22.4545 15.094 22.4198 15.0218C22.3572 14.8475 22.2088 14.6414 22.029 14.7207L13.3081 17.5741C13.1164 17.6378 12.9159 17.6699 12.7142 17.6692C12.3713 17.6691 12.034 17.5807 11.7341 17.4122C11.4341 17.2437 11.1813 17.0007 10.9993 16.706C10.8173 16.4113 10.7121 16.0745 10.6936 15.7272C10.675 15.3799 10.7438 15.0336 10.8934 14.7207C10.9196 14.6618 10.9318 14.5975 10.929 14.533C10.9262 14.4685 10.9085 14.4055 10.8773 14.3492C10.8461 14.2929 10.8024 14.2449 10.7495 14.2089C10.6966 14.1729 10.6362 14.15 10.573 14.142C10.1007 14.068 9.61786 14.1693 9.21328 14.4274C9.11584 14.4901 9.02428 14.5617 8.93977 14.6414L6.84549 17.1619C6.70869 17.3277 6.53777 17.4612 6.34473 17.5529C6.15169 17.6447 5.9412 17.6925 5.72802 17.6929H4.67306V21.4261H14.9335C15.2198 21.4172 15.495 21.3111 15.7149 21.1249L17.4732 19.6507C17.5517 19.5835 17.6424 19.5326 17.7403 19.5011C17.8382 19.4695 17.9412 19.4578 18.0435 19.4666C18.1459 19.4754 18.2455 19.5046 18.3367 19.5525C18.4279 19.6004 18.5089 19.6661 18.575 19.7458C18.6413 19.8254 18.6914 19.9175 18.7226 20.0167C18.7537 20.116 18.7652 20.2205 18.7565 20.3243C18.7478 20.4281 18.719 20.5291 18.6718 20.6216C18.6246 20.7141 18.5598 20.7963 18.4813 20.8634L16.7543 22.3456C16.2435 22.7788 15.5993 23.0172 14.9335 23.0193H3.12579V16.0839H5.73583L7.86137 13.4921C8.51321 12.8641 9.37702 12.5125 10.276 12.5093Z" fill="currentColor"/>
      <path d="M1.46916 14.9822H3.2196C3.41253 14.9822 3.60357 15.0207 3.78181 15.0956C3.96005 15.1705 4.122 15.2803 4.25843 15.4186C4.39485 15.557 4.50306 15.7213 4.57689 15.9021C4.65072 16.0829 4.68872 16.2766 4.68872 16.4723V23.0113C4.68666 23.4052 4.53096 23.7822 4.25567 24.0599C3.98038 24.3376 3.60788 24.4935 3.2196 24.4935H1.46916C1.07952 24.4935 0.705842 24.3365 0.430328 24.0571C0.154814 23.7776 3.14713e-05 23.3986 3.14713e-05 23.0034V16.4723C3.14713e-05 16.0771 0.154814 15.6981 0.430328 15.4186C0.705842 15.1392 1.07952 14.9822 1.46916 14.9822ZM3.12582 16.5674H1.56293V22.9083H3.12582V16.5674Z" fill="currentColor"/>
    </svg>
  `.trim(),

  // 3. Transaction Log: Removed width/height, used currentColor
  'Transaction Log': `
    <svg viewBox="0 0 36 37" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M23.04 10.8362C23.04 11.0737 22.9452 11.3014 22.7764 11.4693C22.6076 11.6372 22.3787 11.7315 22.14 11.7315H16.326C16.0873 11.7315 15.8584 11.6372 15.6896 11.4693C15.5208 11.3014 15.426 11.0737 15.426 10.8362C15.426 10.5988 15.5208 10.3711 15.6896 10.2032C15.8584 10.0353 16.0873 9.94099 16.326 9.94099H22.14C22.3787 9.94099 22.6076 10.0353 22.7764 10.2032C22.9452 10.3711 23.04 10.5988 23.04 10.8362ZM13.1724 9.94099H12.2454C12.0067 9.94099 11.7778 10.0353 11.609 10.2032C11.4402 10.3711 11.3454 10.5988 11.3454 10.8362C11.3454 11.0737 11.4402 11.3014 11.609 11.4693C11.7778 11.6372 12.0067 11.7315 12.2454 11.7315H13.1724C13.4111 11.7315 13.64 11.6372 13.8088 11.4693C13.9776 11.3014 14.0724 11.0737 14.0724 10.8362C14.0724 10.5988 13.9776 10.3711 13.8088 10.2032C13.64 10.0353 13.4111 9.94099 13.1724 9.94099ZM22.14 13.522H16.326C16.0873 13.522 15.8584 13.6163 15.6896 13.7842C15.5208 13.9521 15.426 14.1798 15.426 14.4173C15.426 14.6547 15.5208 14.8824 15.6896 15.0503C15.8584 15.2182 16.0873 15.3125 16.326 15.3125H22.14C22.3787 15.3125 22.6076 15.2182 22.7764 15.0503C22.9452 14.8824 23.04 14.6547 23.04 14.4173C23.04 14.1798 22.9452 13.9521 22.7764 13.7842C22.6076 13.6163 22.3787 13.522 22.14 13.522ZM13.1724 13.522H12.2454C12.0067 13.522 11.7778 13.6163 11.609 13.7842C11.4402 13.9521 11.3454 14.1798 11.3454 14.4173C11.3454 14.6547 11.4402 14.8824 11.609 15.0503C11.7778 15.2182 12.0067 15.3125 12.2454 15.3125H13.1724C13.4111 15.3125 13.64 15.2182 13.8088 15.0503C13.9776 14.8824 14.0724 14.6547 14.0724 14.4173C14.0724 14.1798 13.9776 13.9521 13.8088 13.7842C13.64 13.6163 13.4111 13.522 13.1724 13.522ZM22.14 17.103H16.326C16.0873 17.103 15.8584 17.1973 15.6896 17.3652C15.5208 17.5331 15.426 17.7608 15.426 17.9983C15.426 18.2357 15.5208 18.4634 15.6896 18.6313C15.8584 18.7992 16.0873 18.8935 16.326 18.8935H22.14C22.3787 18.8935 22.6076 18.7992 22.7764 18.6313C22.9452 18.4634 23.04 18.2357 23.04 17.9983C23.04 17.7608 22.9452 17.5331 22.7764 17.3652C22.6076 17.1973 22.3787 17.103 22.14 17.103ZM13.1724 17.103H12.2454C12.0067 17.103 11.7778 17.1973 11.609 17.3652C11.4402 17.5331 11.3454 17.7608 11.3454 17.9983C11.3454 18.2357 11.4402 18.4634 11.609 18.6313C11.7778 18.7992 12.0067 18.8935 12.2454 18.8935H13.1724C13.4111 18.8935 13.64 18.7992 13.8088 18.6313C13.9776 18.4634 14.0724 18.2357 14.0724 17.9983C14.0724 17.7608 13.9776 17.5331 13.8088 17.3652C13.64 17.1973 13.4111 17.103 13.1724 17.103ZM29.0682 25.9821C29.0678 26.9939 28.7659 27.9828 28.2005 28.8238C27.6351 29.6649 26.8317 30.3203 25.8919 30.7071C24.9521 31.094 23.9181 31.1949 22.9206 30.9972C21.9231 30.7994 21.0069 30.3119 20.288 29.5963C19.569 28.8806 19.0795 27.9689 18.8815 26.9766C18.6834 25.9842 18.7856 24.9557 19.1751 24.0211C19.5647 23.0865 20.2241 22.2878 21.07 21.726C21.9159 21.1642 22.9103 20.8645 23.9274 20.8649C25.2909 20.8668 26.5979 21.4066 27.5617 22.366C28.5254 23.3254 29.0672 24.6259 29.0682 25.9821ZM27.2682 25.9821C27.2682 25.3244 27.0721 24.6815 26.7047 24.1347C26.3374 23.5879 25.8152 23.1617 25.2043 22.9101C24.5935 22.6585 23.9213 22.5927 23.2728 22.7212C22.6244 22.8496 22.0288 23.1665 21.5614 23.6317C21.094 24.0968 20.7758 24.6895 20.647 25.3346C20.5182 25.9797 20.5847 26.6483 20.838 27.2558C21.0912 27.8633 21.5199 28.3825 22.0699 28.7476C22.6198 29.1128 23.2662 29.3075 23.9274 29.3071C24.8133 29.3057 25.6625 28.9549 26.2888 28.3316C26.915 27.7083 27.2672 26.8634 27.2682 25.9821ZM16.344 23.1818H9.63C9.3913 23.1818 9.16239 23.0875 8.9936 22.9196C8.82482 22.7517 8.73 22.524 8.73 22.2865V8.12363C8.73 7.88619 8.82482 7.65848 8.9936 7.49059C9.16239 7.32269 9.3913 7.22837 9.63 7.22837H24.786C25.0247 7.22837 25.2536 7.32269 25.4224 7.49059C25.5912 7.65848 25.686 7.88619 25.686 8.12363V18.6697C25.686 18.9071 25.7808 19.1349 25.9496 19.3027C26.1184 19.4706 26.3473 19.565 26.586 19.565C26.8247 19.565 27.0536 19.4706 27.2224 19.3027C27.3912 19.1349 27.486 18.9071 27.486 18.6697V8.12363C27.485 7.41161 27.2003 6.72903 26.6941 6.22555C26.188 5.72208 25.5018 5.43881 24.786 5.43787H9.63C8.91421 5.43881 8.228 5.72208 7.72186 6.22555C7.21572 6.72903 6.93095 7.41161 6.93 8.12363V22.2865C6.93095 22.9985 7.21572 23.6811 7.72186 24.1846C8.228 24.6881 8.91421 24.9713 9.63 24.9723H16.344C16.5827 24.9723 16.8116 24.878 16.9804 24.7101C17.1492 24.5422 17.244 24.3145 17.244 24.077C17.244 23.8396 17.1492 23.6119 16.9804 23.444C16.8116 23.2761 16.5827 23.1818 16.344 23.1818ZM23.9274 23.1818C23.6887 23.1818 23.4598 23.2761 23.291 23.444C23.1222 23.6119 23.0274 23.8396 23.0274 24.077V25.0869H22.5504C22.3117 25.0869 22.0828 25.1812 21.914 25.3491C21.7452 25.517 21.6504 25.7447 21.6504 25.9821C21.6504 26.2196 21.7452 26.4473 21.914 26.6152C22.0828 26.7831 22.3117 26.8774 22.5504 26.8774H23.9274C24.1661 26.8774 24.395 26.7831 24.5638 26.6152C24.7326 26.4473 24.8274 26.2196 24.8274 25.9821V24.077C24.8274 23.8396 24.7326 23.6119 24.5638 23.444C24.395 23.2761 24.1661 23.1818 23.9274 23.1818Z" fill="currentColor"/>
    </svg>
  `.trim()
};

const currentIcon = computed(() => {
  const svgContent = svgMap[props.iconName];
  
  if (svgContent) {
    return svgContent.trim();
  }

  // Fallback for debugging
  return '<span>Icon not found: ' + props.iconName + '</span>';
});
</script>

<template>
  <div :class="containerClass">
    <div 
      v-html="currentIcon" 
      style="display: block; width: 100%; height: 100%;"
    ></div>
  </div>
</template> -->